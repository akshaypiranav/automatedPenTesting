from django.db import models
from django.utils import timezone
import datetime
from django.forms import ValidationError


# Create your models here.
def get_filename(instance, filename):
    timestamp = timezone.now().strftime("%Y%m%d_%H%M%S")
    return f"media/{timestamp}_{filename}"







# Create your models here.
class Register(models.Model):
    
    name=models.CharField(max_length=100)
    lastname=models.CharField(max_length=100)
    email=models.EmailField(unique=True)
    password=models.CharField(max_length=100)
    def clean(self):
        # Custom validation for minimum length
        min_length = 5  # Change 5 to your desired minimum length
        if len(self.your_fieldc) < min_length:
            raise ValidationError("Your field must be at least {} characters long.".format(min_length))

class Urls_of_users(models.Model):
    user = models.ForeignKey(Register, on_delete=models.CASCADE)
    url = models.URLField()
    url_status=models.CharField(max_length=20,null=False,blank=False,default="Scheduled")
    generatedReport = models.FileField(upload_to=get_filename,null=True, blank=True)